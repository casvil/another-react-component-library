import{j as r}from"./jsx-runtime-D_zvdyIk.js";import{r as i}from"./iframe-9e6QjIOn.js";import{c as b}from"./clsx-B-dksMZM.js";import{o as I,q as A,v as H,w as K,x as W,y as J,z as X}from"./classes-BD7lNhBs.js";const j=[{name:"amex",pattern:/^3[47]/,gaps:[4,10],lengths:[15],cvcLength:4,displayName:"AMERICAN EXPRESS",gradient:"from-green-600 via-teal-600 to-blue-600"},{name:"diners",pattern:/^30[0-5]|^36|^38/,gaps:[4,10],lengths:[14],cvcLength:3,displayName:"DINERS CLUB",gradient:"from-gray-600 via-gray-700 to-gray-800"},{name:"discover",pattern:/^6(?:011|5)/,gaps:[4,8,12],lengths:[16,19],cvcLength:3,displayName:"DISCOVER",gradient:"from-orange-500 via-orange-600 to-red-600"},{name:"jcb",pattern:/^35/,gaps:[4,8,12],lengths:[16],cvcLength:3,displayName:"JCB",gradient:"from-blue-800 via-indigo-700 to-purple-600"},{name:"unionpay",pattern:/^62/,gaps:[4,8,12],lengths:[16,17,18,19],cvcLength:3,displayName:"UNIONPAY",gradient:"from-red-600 via-red-700 to-red-800"},{name:"maestro",pattern:/^5018|^5020|^5038|^5893|^6304|^6759|^6761|^6762|^6763/,gaps:[4,8,12],lengths:[12,13,14,15,16,17,18,19],cvcLength:3,displayName:"MAESTRO",gradient:"from-blue-700 via-red-500 to-yellow-400"},{name:"elo",pattern:/^506699|^5067|^50900|^50901|^50902|^50903|^50904|^50905|^50906|^50907|^50908|^50909|^50910|^50911|^50912|^50913|^50914|^50915|^50916|^50917|^50918|^50919|^50920|^50921|^50922|^50923|^50924|^50925|^50926|^50927|^50928|^50929|^50930|^50931|^50932|^50933|^50934|^50935|^50936|^50937|^50938|^50939|^50940|^50941|^50942|^50943|^50944|^50945|^50946|^50947|^50948|^50949|^50950|^6362|^6505/,gaps:[4,8,12],lengths:[16],cvcLength:3,displayName:"ELO",gradient:"from-yellow-500 via-yellow-600 to-orange-600"},{name:"mir",pattern:/^2200|^2201|^2202|^2203|^2204/,gaps:[4,8,12],lengths:[16,17,18,19],cvcLength:3,displayName:"MIR",gradient:"from-green-600 via-blue-600 to-red-600"},{name:"rupay",pattern:/^607|^6521|^6522/,gaps:[4,8,12],lengths:[16],cvcLength:3,displayName:"RUPAY",gradient:"from-orange-500 via-white to-green-600"},{name:"mastercard",pattern:/^5[1-5]|^2[2-7]/,gaps:[4,8,12],lengths:[16],cvcLength:3,displayName:"MASTERCARD",gradient:"from-red-500 via-orange-500 to-yellow-500"},{name:"visa",pattern:/^4/,gaps:[4,8,12],lengths:[13,16,19],cvcLength:3,displayName:"VISA",gradient:"from-blue-600 via-blue-500 to-blue-700"}],k=e=>{const t=e.replace(/\s/g,"");if(!t)return null;const u=j.find(p=>p.pattern.test(t));return(u==null?void 0:u.name)||"unknown"},_=e=>{if(!e||e==="unknown")return{gaps:[4,8,12],maxLength:16,cvcLength:3};const t=j.find(u=>u.name===e);return{gaps:(t==null?void 0:t.gaps)||[4,8,12],maxLength:Math.max(...(t==null?void 0:t.lengths)||[16]),cvcLength:(t==null?void 0:t.cvcLength)||3}},Z=e=>!e||e==="unknown"?null:j.find(t=>t.name===e)||null,Q={cardNumber:{label:"Card number",ariaLabel:"Credit card number",id:"cardNumber",placeholder:"•••• •••• •••• ••••",inputMode:"numeric",maxLength:23},cardholderName:{label:"cardholder name",ariaLabel:"Cardholder name",id:"cardholderName",placeholder:"CARDHOLDER NAME",inputMode:"text",maxLength:26},expiryDate:{label:"expiry date",ariaLabel:"Expiry date",id:"expiryDate",placeholder:"MM/YY",inputMode:"numeric",maxLength:5},cvc:{label:"cvc",ariaLabel:"CVC",id:"cvc"}},Y={input:"bg-transparent border-none outline-none text-white font-mono tracking-wider min-h-[1.25em]",span:"font-mono tracking-wider min-h-[1.25em] inline-block",button:"font-mono tracking-wider text-left cursor-pointer hover:bg-white/10 rounded px-1 -mx-1 transition-colors focus:outline-none focus:ring-2 focus:ring-white/20 min-h-[1.25em] inline-block"},ce={cardNumber:{id:"credit-card-number",label:"Card Number",placeholder:"1234 5678 9012 3456",inputMode:"numeric",autoComplete:"cc-number",className:A.cardNumber,errorClass:I.default,required:!0},cardholderName:{id:"cardholder-name",label:"Card Holder",placeholder:"VICTOR SAULER",autoComplete:"cc-name",className:A.cardholderName,errorClass:I.default},expiryDate:{id:"expiry-date",label:"Exp. Date",placeholder:"MM/YY",inputMode:"numeric",autoComplete:"cc-exp",maxLength:5,className:A.expiryDate,errorClass:I.default,required:!0},cvc:{id:"cvc",label:"CVC",inputMode:"numeric",autoComplete:"cc-csc",className:A.cvc,errorClass:I.default,required:!0}},B=K,oe={cardNumber:{required:"Card number is required",invalid:"Please enter a valid card number"},cardholderName:{required:"Cardholder name is required"},expiryDate:{required:"Expiry date is required",invalid:"Please enter a valid future date"},cvc:{required:"CVC is required",invalid:e=>`CVC must be ${e} digits`}},ee=({cardNumber:e,cardType:t,mode:u="form"})=>{const p=i.useMemo(()=>t||k(e),[e,t]),w=i.useMemo(()=>_(p),[p]),L=i.useCallback(s=>{const l=s.replace(/\D/g,"");let n;const o=e.replace(/\D/g,""),m=o.length,g=l.length,x=m>=13,f=g>m;let C=!1;if(x){const a=t||k(o),d=j.find(c=>c.name===a);d&&(C=d.lengths.includes(m))}if(u==="preview"?x&&C:x&&!f){const a=o.length,d=t||k(o),c=j.find(v=>v.name===d);if(c&&c.lengths.length>1){const v=c.lengths.sort((T,z)=>T-z);v.includes(a)?n=a:n=v.find(T=>T>=a)||v[v.length-1]}else n=a||16}else{const a=t||k(l),d=j.find(c=>c.name===a);d?u==="form"?n={visa:16,mastercard:16,amex:15,discover:16,diners:14,jcb:16,unionpay:16,maestro:16,elo:16,mir:16,rupay:16}[a]||16:n=Math.max(...d.lengths):n=16}const M=l.slice(0,n),P=t||k(M),q=_(P);let E="",N=0;for(let a=0;a<M.length;a++)q.gaps.includes(N)&&E.length>0&&(E+=" "),E+=M[a],N++;return E},[e,t,u]),R=i.useCallback(s=>{const l=s.replace(/\D/g,"").slice(0,4);if(l.length>=2){const n=l.slice(0,2),o=l.slice(2),m=parseInt(n,10),g=m>=1&&m<=12?n:"12";return o.length>0?`${g}/${o}`:g}return l},[]),F=i.useCallback(s=>s.replace(/\D/g,"").slice(0,w.cvcLength),[w.cvcLength]),D=i.useCallback(s=>s.replace(/[^a-zA-Z\s\-']/g,"").toUpperCase().slice(0,26),[]),V=i.useCallback(s=>{const l=s.replace(/\s/g,"");if(l.length<13||l.length>19)return!1;let n=0,o=!1;for(let m=l.length-1;m>=0;m--){let g=parseInt(l[m]);o&&(g*=2,g>9&&(g-=9)),n+=g,o=!o}return n%10===0},[]),y=i.useCallback(s=>{const l=s.replace(/\D/g,"");if(l.length!==4)return!1;const n=parseInt(l.slice(0,2)),o=parseInt(l.slice(2,4));if(n<1||n>12)return!1;const m=new Date,g=m.getFullYear()%100,x=m.getMonth()+1;return o>g||o===g&&n>=x},[]),S=i.useCallback((s,l)=>{const n=s.replace(/\D/g,""),o=_(l).cvcLength;return n.length===o},[]);return{formatCardNumber:L,formatExpiryDate:R,formatCvc:F,formatCardholderName:D,validateCardNumber:V,validateExpiryDate:y,validateCvc:S,cardType:p,formatRules:w}},ae=e=>({label:"cvc",placeholder:e==="amex"?"••••":"•••",inputMode:"numeric",maxLength:e==="amex"?4:3}),te=(e,t=null)=>e==="cvc"?ae(t):Q[e],ne=e=>({fontSize:"inherit",fontFamily:"inherit",width:H[e]}),de=e=>!e||!(e in B)?"":B[e],ue=e=>e===4?"1234":"123",me=e=>e+Math.floor(e/4),$=({cardNumber:e="",cardholderName:t="",expiryDate:u="",cvc:p="",cardType:w,onChange:L,editable:R=!0,className:F,size:D="md",showCvc:V=!0})=>{const[y,S]=i.useState(null),[s,l]=i.useState({cardNumber:e,cardholderName:t,expiryDate:u,cvc:p}),n=i.useRef({cardNumber:i.useRef(null),cardholderName:i.useRef(null),expiryDate:i.useRef(null),cvc:i.useRef(null)}).current,{formatCardNumber:o,formatExpiryDate:m,formatCvc:g,formatCardholderName:x}=ee({cardNumber:e,cardType:w,mode:"preview"}),f=w||k(s.cardNumber),C=Z(f),h=W[D],M=i.useCallback(a=>R&&S(a),[R]),P=i.useCallback((a,d)=>{let c=d;switch(a){case"cardNumber":c=o(d);break;case"cardholderName":c=x(d);break;case"expiryDate":c=m(d);break;case"cvc":c=g(d);break}l(v=>({...v,[a]:c}))},[o,x,m,g]),q=i.useCallback(()=>{S(null),L==null||L({...s,cardType:f})},[s,L,f]),E=i.useCallback(a=>{a.key==="Enter"&&q(),a.key==="Escape"&&(S(null),l({cardNumber:e,cardholderName:t,expiryDate:u,cvc:p}))},[q,e,t,u,p]);i.useEffect(()=>{var a,d;y&&((a=n[y].current)==null||a.focus(),(d=n[y].current)==null||d.select())},[y,n]),i.useEffect(()=>{l({cardNumber:e,cardholderName:t,expiryDate:u,cvc:p})},[e,t,u,p]);const N=(a,d)=>{const c=te(a,f),v=y===a,U=!{cardNumber:e,cardholderName:t,expiryDate:u,cvc:p}[a]||!d.trim()?c.placeholder:d,O=ne(a);return v?r.jsx("input",{ref:n[a],value:s[a],onChange:G=>P(a,G.target.value),onBlur:q,onKeyDown:E,placeholder:c.placeholder,inputMode:c.inputMode,maxLength:c.maxLength,"aria-label":`Edit ${c.label}`,className:Y.input,style:O}):R?r.jsx("button",{type:"button",onClick:()=>M(a),className:Y.button,"aria-label":`Edit ${c.label}`,style:O,children:U}):r.jsx("span",{className:Y.span,style:O,children:U})};return r.jsx("div",{role:"article",className:b("bg-gradient-to-br rounded-xl text-white relative overflow-hidden shadow-xl",(C==null?void 0:C.gradient)||"from-slate-800 via-slate-700 to-teal-600",X[D],F),children:r.jsxs("div",{className:"relative z-10 h-full flex flex-col",children:[r.jsx("div",{className:"flex justify-between items-start mb-8",children:r.jsx("div",{className:b("font-bold italic",h.brand),children:(C==null?void 0:C.displayName)||(f==null?void 0:f.toUpperCase())||"CARD"})}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:b("text-gray-300 mb-1",h.label),children:"Card Number"}),r.jsx("div",{className:h.number,children:N("cardNumber",o(s.cardNumber))}),r.jsx("div",{className:"w-full h-px bg-gray-400 mt-2"})]}),r.jsxs("div",{className:b("flex justify-between items-end",J[D]),children:[r.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[r.jsx("div",{className:b("text-gray-300 mb-1",h.label),children:"Card Holder"}),r.jsx("div",{className:b("uppercase truncate",h.value),children:N("cardholderName",s.cardholderName)}),r.jsx("div",{className:"w-2/3 h-px bg-gray-400 mt-1"})]}),r.jsxs("div",{className:"text-left mx-4 flex-shrink-0 w-20",children:[r.jsx("div",{className:b("text-gray-300 mb-1",h.label),children:"Exp. Date"}),r.jsx("div",{className:h.value,children:N("expiryDate",s.expiryDate)}),r.jsx("div",{className:"w-full h-px bg-gray-400 mt-1"})]}),V&&r.jsxs("div",{className:"text-left flex-shrink-0 w-16",children:[r.jsx("div",{className:b("text-gray-300 mb-1",h.label),children:"CCV"}),r.jsx("div",{className:h.value,children:N("cvc",s.cvc)}),r.jsx("div",{className:"w-full h-px bg-gray-400 mt-1"})]})]})]})})};$.displayName="CreditCardPreview";$.__docgenInfo={description:`CreditCardPreview molecule component.
An editable credit card visualization that matches real credit card design.`,methods:[],displayName:"CreditCardPreview",props:{cardNumber:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},cardholderName:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},expiryDate:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},cvc:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"''",computed:!1}},cardType:{required:!1,tsType:{name:"union",raw:"CardType | null",elements:[{name:"union",raw:`| 'visa'
| 'mastercard'
| 'amex'
| 'discover'
| 'diners'
| 'jcb'
| 'unionpay'
| 'maestro'
| 'elo'
| 'mir'
| 'rupay'
| 'unknown'`,elements:[{name:"literal",value:"'visa'"},{name:"literal",value:"'mastercard'"},{name:"literal",value:"'amex'"},{name:"literal",value:"'discover'"},{name:"literal",value:"'diners'"},{name:"literal",value:"'jcb'"},{name:"literal",value:"'unionpay'"},{name:"literal",value:"'maestro'"},{name:"literal",value:"'elo'"},{name:"literal",value:"'mir'"},{name:"literal",value:"'rupay'"},{name:"literal",value:"'unknown'"}]},{name:"null"}]},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:`(data: {
  cardNumber?: string;
  cardholderName?: string;
  expiryDate?: string;
  cvc?: string;
  cardType?: CardType | null;
}) => void`,signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  cardNumber?: string;
  cardholderName?: string;
  expiryDate?: string;
  cvc?: string;
  cardType?: CardType | null;
}`,signature:{properties:[{key:"cardNumber",value:{name:"string",required:!1}},{key:"cardholderName",value:{name:"string",required:!1}},{key:"expiryDate",value:{name:"string",required:!1}},{key:"cvc",value:{name:"string",required:!1}},{key:"cardType",value:{name:"union",raw:"CardType | null",elements:[{name:"union",raw:`| 'visa'
| 'mastercard'
| 'amex'
| 'discover'
| 'diners'
| 'jcb'
| 'unionpay'
| 'maestro'
| 'elo'
| 'mir'
| 'rupay'
| 'unknown'`,elements:[{name:"literal",value:"'visa'"},{name:"literal",value:"'mastercard'"},{name:"literal",value:"'amex'"},{name:"literal",value:"'discover'"},{name:"literal",value:"'diners'"},{name:"literal",value:"'jcb'"},{name:"literal",value:"'unionpay'"},{name:"literal",value:"'maestro'"},{name:"literal",value:"'elo'"},{name:"literal",value:"'mir'"},{name:"literal",value:"'rupay'"},{name:"literal",value:"'unknown'"}]},{name:"null"}],required:!1}}]}},name:"data"}],return:{name:"void"}}},description:""},editable:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},className:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"'sm' | 'md' | 'lg'",elements:[{name:"literal",value:"'sm'"},{name:"literal",value:"'md'"},{name:"literal",value:"'lg'"}]},description:"",defaultValue:{value:"'md'",computed:!1}},showCvc:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}}}};export{$ as C,oe as E,ce as F,de as a,ue as b,me as g,ee as u};
